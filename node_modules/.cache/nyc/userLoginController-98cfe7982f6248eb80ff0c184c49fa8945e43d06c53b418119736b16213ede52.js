function cov_23h8lu8ah1(){var path="/home/abhigna.t/EventEasee/controllers/userLoginController.js";var hash="06836d544d20a516bb38fa79434f7698a17acc86";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/abhigna.t/EventEasee/controllers/userLoginController.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:13},end:{line:3,column:32}},"3":{start:{line:4,column:11},end:{line:4,column:36}},"4":{start:{line:5,column:12},end:{line:5,column:28}},"5":{start:{line:6,column:12},end:{line:6,column:38}},"6":{start:{line:7,column:16},end:{line:7,column:42}},"7":{start:{line:9,column:0},end:{line:9,column:39}},"8":{start:{line:11,column:36},end:{line:11,column:64}},"9":{start:{line:12,column:31},end:{line:12,column:67}},"10":{start:{line:13,column:12},end:{line:13,column:35}},"11":{start:{line:14,column:21},end:{line:14,column:45}},"12":{start:{line:15,column:22},end:{line:15,column:37}},"13":{start:{line:17,column:20},end:{line:17,column:63}},"14":{start:{line:20,column:21},end:{line:20,column:30}},"15":{start:{line:21,column:18},end:{line:21,column:32}},"16":{start:{line:23,column:0},end:{line:23,column:26}},"17":{start:{line:26,column:20},end:{line:29,column:1}},"18":{start:{line:27,column:16},end:{line:27,column:67}},"19":{start:{line:28,column:2},end:{line:28,column:15}},"20":{start:{line:34,column:0},end:{line:36,column:3}},"21":{start:{line:35,column:2},end:{line:35,column:38}},"22":{start:{line:40,column:4},end:{line:45,column:5}},"23":{start:{line:41,column:6},end:{line:41,column:29}},"24":{start:{line:44,column:6},end:{line:44,column:20}},"25":{start:{line:50,column:2},end:{line:55,column:3}},"26":{start:{line:51,column:4},end:{line:51,column:24}},"27":{start:{line:54,column:4},end:{line:54,column:18}},"28":{start:{line:61,column:0},end:{line:97,column:1}},"29":{start:{line:62,column:17},end:{line:62,column:38}},"30":{start:{line:63,column:2},end:{line:93,column:3}},"31":{start:{line:64,column:23},end:{line:64,column:37}},"32":{start:{line:65,column:4},end:{line:67,column:7}},"33":{start:{line:70,column:21},end:{line:70,column:61}},"34":{start:{line:71,column:4},end:{line:92,column:5}},"35":{start:{line:72,column:6},end:{line:74,column:8}},"36":{start:{line:77,column:17},end:{line:77,column:73}},"37":{start:{line:78,column:6},end:{line:91,column:7}},"38":{start:{line:80,column:20},end:{line:80,column:47}},"39":{start:{line:81,column:8},end:{line:81,column:70}},"40":{start:{line:83,column:8},end:{line:85,column:10}},"41":{start:{line:88,column:8},end:{line:90,column:10}},"42":{start:{line:96,column:2},end:{line:96,column:16}},"43":{start:{line:101,column:0},end:{line:139,column:3}},"44":{start:{line:102,column:0},end:{line:102,column:22}},"45":{start:{line:103,column:0},end:{line:103,column:30}},"46":{start:{line:104,column:47},end:{line:104,column:55}},"47":{start:{line:105,column:25},end:{line:105,column:54}},"48":{start:{line:107,column:2},end:{line:107,column:24}},"49":{start:{line:110,column:24},end:{line:110,column:56}},"50":{start:{line:111,column:2},end:{line:135,column:3}},"51":{start:{line:112,column:4},end:{line:114,column:6}},"52":{start:{line:117,column:7},end:{line:135,column:3}},"53":{start:{line:118,column:4},end:{line:120,column:6}},"54":{start:{line:124,column:19},end:{line:124,column:70}},"55":{start:{line:125,column:24},end:{line:125,column:41}},"56":{start:{line:127,column:6},end:{line:129,column:7}},"57":{start:{line:128,column:10},end:{line:128,column:80}},"58":{start:{line:131,column:6},end:{line:133,column:8}},"59":{start:{line:137,column:6},end:{line:137,column:25}},"60":{start:{line:138,column:6},end:{line:138,column:69}},"61":{start:{line:143,column:2},end:{line:148,column:3}},"62":{start:{line:144,column:4},end:{line:144,column:27}},"63":{start:{line:145,column:4},end:{line:145,column:22}},"64":{start:{line:147,column:4},end:{line:147,column:18}},"65":{start:{line:153,column:0},end:{line:153,column:63}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:26,column:20},end:{line:26,column:21}},loc:{start:{line:26,column:31},end:{line:29,column:1}},line:26},"1":{name:"(anonymous_1)",decl:{start:{line:34,column:16},end:{line:34,column:17}},loc:{start:{line:34,column:41},end:{line:36,column:1}},line:34},"2":{name:"register",decl:{start:{line:38,column:15},end:{line:38,column:23}},loc:{start:{line:38,column:39},end:{line:46,column:1}},line:38},"3":{name:"login",decl:{start:{line:48,column:15},end:{line:48,column:20}},loc:{start:{line:48,column:36},end:{line:56,column:1}},line:48},"4":{name:"validate",decl:{start:{line:60,column:15},end:{line:60,column:23}},loc:{start:{line:60,column:39},end:{line:98,column:1}},line:60},"5":{name:"newuser",decl:{start:{line:100,column:15},end:{line:100,column:22}},loc:{start:{line:100,column:39},end:{line:140,column:1}},line:100},"6":{name:"logout",decl:{start:{line:142,column:15},end:{line:142,column:21}},loc:{start:{line:142,column:39},end:{line:149,column:1}},line:142}},branchMap:{"0":{loc:{start:{line:63,column:2},end:{line:93,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:93,column:3}},{start:{line:63,column:2},end:{line:93,column:3}}],line:63},"1":{loc:{start:{line:71,column:4},end:{line:92,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:92,column:5}},{start:{line:71,column:4},end:{line:92,column:5}}],line:71},"2":{loc:{start:{line:78,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:91,column:7}},{start:{line:78,column:6},end:{line:91,column:7}}],line:78},"3":{loc:{start:{line:111,column:2},end:{line:135,column:3}},type:"if",locations:[{start:{line:111,column:2},end:{line:135,column:3}},{start:{line:111,column:2},end:{line:135,column:3}}],line:111},"4":{loc:{start:{line:117,column:7},end:{line:135,column:3}},type:"if",locations:[{start:{line:117,column:7},end:{line:135,column:3}},{start:{line:117,column:7},end:{line:135,column:3}}],line:117},"5":{loc:{start:{line:127,column:6},end:{line:129,column:7}},type:"if",locations:[{start:{line:127,column:6},end:{line:129,column:7}},{start:{line:127,column:6},end:{line:129,column:7}}],line:127}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"06836d544d20a516bb38fa79434f7698a17acc86"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_23h8lu8ah1=function(){return actualCoverage;};}return actualCoverage;}cov_23h8lu8ah1();var express=(cov_23h8lu8ah1().s[0]++,require('express'));var router=(cov_23h8lu8ah1().s[1]++,express.Router());var bcrypt=(cov_23h8lu8ah1().s[2]++,require('bcryptjs'));var User=(cov_23h8lu8ah1().s[3]++,require('../models/User'));var alert=(cov_23h8lu8ah1().s[4]++,require('alert'));var Event=(cov_23h8lu8ah1().s[5]++,require('../models/Event'));let session=(cov_23h8lu8ah1().s[6]++,require('express-session'));cov_23h8lu8ah1().s[7]++;router.use(express.static("./public"));let{check,validationResult}=(cov_23h8lu8ah1().s[8]++,require('express-validator'));let{gettingUserDetails}=(cov_23h8lu8ah1().s[9]++,require('../models/userLoginModels'));let jwt=(cov_23h8lu8ah1().s[10]++,require('jsonwebtoken'));let cookieParser=(cov_23h8lu8ah1().s[11]++,require('cookie-parser'));let{v4:uuidv4}=(cov_23h8lu8ah1().s[12]++,require('uuid'));let verifyToken=(cov_23h8lu8ah1().s[13]++,require('../middlewares/tokenVerification'));let cookieMaxAge=(cov_23h8lu8ah1().s[14]++,300000000);let jwtSecret=(cov_23h8lu8ah1().s[15]++,"keyboard cat");cov_23h8lu8ah1().s[16]++;router.use(cookieParser());cov_23h8lu8ah1().s[17]++;let createToken=email=>{cov_23h8lu8ah1().f[0]++;let token=(cov_23h8lu8ah1().s[18]++,jwt.sign({email},jwtSecret,{expiresIn:'1h'}));// Token expires in 1 hour
cov_23h8lu8ah1().s[19]++;return token;};/* GET users listing. */cov_23h8lu8ah1().s[20]++;router.get('/',function(req,res,next){cov_23h8lu8ah1().f[1]++;cov_23h8lu8ah1().s[21]++;res.send('respond with a resource');});async function register(req,res,next){cov_23h8lu8ah1().f[2]++;cov_23h8lu8ah1().s[22]++;try{cov_23h8lu8ah1().s[23]++;res.render('register');}catch(e){cov_23h8lu8ah1().s[24]++;console.log(e);}}async function login(req,res,next){cov_23h8lu8ah1().f[3]++;cov_23h8lu8ah1().s[25]++;try{cov_23h8lu8ah1().s[26]++;res.render('login');}catch(e){cov_23h8lu8ah1().s[27]++;console.log(e);}}async function validate(req,res,next){cov_23h8lu8ah1().f[4]++;cov_23h8lu8ah1().s[28]++;try{let errors=(cov_23h8lu8ah1().s[29]++,validationResult(req));cov_23h8lu8ah1().s[30]++;if(!errors.isEmpty()){cov_23h8lu8ah1().b[0][0]++;let alertError=(cov_23h8lu8ah1().s[31]++,errors.array());cov_23h8lu8ah1().s[32]++;res.json({alertError:alertError});}else{cov_23h8lu8ah1().b[0][1]++;let result1=(cov_23h8lu8ah1().s[33]++,await gettingUserDetails(req.body.email));cov_23h8lu8ah1().s[34]++;if(result1==null){cov_23h8lu8ah1().b[1][0]++;cov_23h8lu8ah1().s[35]++;res.json({result:'user-not-found',msg:'User Does not Exists, Please Register'});}else{cov_23h8lu8ah1().b[1][1]++;let pw=(cov_23h8lu8ah1().s[36]++,await bcrypt.compare(req.body.password,result1.password));cov_23h8lu8ah1().s[37]++;if(pw){cov_23h8lu8ah1().b[2][0]++;let token=(cov_23h8lu8ah1().s[38]++,createToken(req.body.email));cov_23h8lu8ah1().s[39]++;res.cookie('jwt',token,{maxAge:cookieMaxAge,httpOnly:true});cov_23h8lu8ah1().s[40]++;res.json({result:'redirect',url:'/users/user_home'});}else{cov_23h8lu8ah1().b[2][1]++;cov_23h8lu8ah1().s[41]++;res.json({result:'password-wrong',msg:'Enter Correct Password'});}}}}catch(e){cov_23h8lu8ah1().s[42]++;console.log(e);}}async function newuser(req,res,next){cov_23h8lu8ah1().f[5]++;cov_23h8lu8ah1().s[43]++;try{cov_23h8lu8ah1().s[44]++;console.log(req.body);cov_23h8lu8ah1().s[45]++;console.log("entered signup");let{name,email,password,password1}=(cov_23h8lu8ah1().s[46]++,req.body);let hashedPassword=(cov_23h8lu8ah1().s[47]++,bcrypt.hashSync(password,10));cov_23h8lu8ah1().s[48]++;console.log(req.body);let existingEmail=(cov_23h8lu8ah1().s[49]++,await User.find({email:email}));cov_23h8lu8ah1().s[50]++;if(existingEmail.length!==0){cov_23h8lu8ah1().b[3][0]++;cov_23h8lu8ah1().s[51]++;res.json({result:'existing user',msg:'User with this email id already exists. Try to login'});}else{cov_23h8lu8ah1().b[3][1]++;cov_23h8lu8ah1().s[52]++;if(password1!==password){cov_23h8lu8ah1().b[4][0]++;cov_23h8lu8ah1().s[53]++;res.json({result:'passwords doesnot match',msg:'Enter Correct Password'});}else{cov_23h8lu8ah1().b[4][1]++;let user=(cov_23h8lu8ah1().s[54]++,new User({name,email,password:hashedPassword}));let savedUser=(cov_23h8lu8ah1().s[55]++,await user.save());cov_23h8lu8ah1().s[56]++;if(!savedUser){cov_23h8lu8ah1().b[5][0]++;cov_23h8lu8ah1().s[57]++;return res.status(500).json({message:'Unexpected Error Occurred'});}else{cov_23h8lu8ah1().b[5][1]++;}cov_23h8lu8ah1().s[58]++;res.json({result:'redirect',url:'/users/login'});// res.render('login');
}}}catch(err){cov_23h8lu8ah1().s[59]++;console.error(err);cov_23h8lu8ah1().s[60]++;res.status(500).json({message:'Unexpected Error Occurred'});}}async function logout(req,res,next){cov_23h8lu8ah1().f[6]++;cov_23h8lu8ah1().s[61]++;try{cov_23h8lu8ah1().s[62]++;res.clearCookie('jwt');cov_23h8lu8ah1().s[63]++;res.redirect('/');}catch(e){cov_23h8lu8ah1().s[64]++;console.log(e);}}cov_23h8lu8ah1().s[65]++;module.exports={register,login,validate,newuser,logout};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjNoOGx1OGFoMSIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiYmNyeXB0IiwiVXNlciIsImFsZXJ0IiwiRXZlbnQiLCJzZXNzaW9uIiwidXNlIiwic3RhdGljIiwiY2hlY2siLCJ2YWxpZGF0aW9uUmVzdWx0IiwiZ2V0dGluZ1VzZXJEZXRhaWxzIiwiand0IiwiY29va2llUGFyc2VyIiwidjQiLCJ1dWlkdjQiLCJ2ZXJpZnlUb2tlbiIsImNvb2tpZU1heEFnZSIsImp3dFNlY3JldCIsImNyZWF0ZVRva2VuIiwiZW1haWwiLCJmIiwidG9rZW4iLCJzaWduIiwiZXhwaXJlc0luIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInNlbmQiLCJyZWdpc3RlciIsInJlbmRlciIsImUiLCJjb25zb2xlIiwibG9nIiwibG9naW4iLCJ2YWxpZGF0ZSIsImVycm9ycyIsImlzRW1wdHkiLCJiIiwiYWxlcnRFcnJvciIsImFycmF5IiwianNvbiIsInJlc3VsdDEiLCJib2R5IiwicmVzdWx0IiwibXNnIiwicHciLCJjb21wYXJlIiwicGFzc3dvcmQiLCJjb29raWUiLCJtYXhBZ2UiLCJodHRwT25seSIsInVybCIsIm5ld3VzZXIiLCJuYW1lIiwicGFzc3dvcmQxIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoU3luYyIsImV4aXN0aW5nRW1haWwiLCJmaW5kIiwibGVuZ3RoIiwidXNlciIsInNhdmVkVXNlciIsInNhdmUiLCJzdGF0dXMiLCJtZXNzYWdlIiwiZXJyIiwiZXJyb3IiLCJsb2dvdXQiLCJjbGVhckNvb2tpZSIsInJlZGlyZWN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZXJMb2dpbkNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnZhciBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpO1xudmFyIFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvVXNlcicpO1xudmFyIGFsZXJ0ID0gcmVxdWlyZSgnYWxlcnQnKTsgXG52YXIgRXZlbnQgPSByZXF1aXJlKCcuLi9tb2RlbHMvRXZlbnQnKTtcbmxldCAgIHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcblxucm91dGVyLnVzZShleHByZXNzLnN0YXRpYyhcIi4vcHVibGljXCIpKTtcblxubGV0ICAgeyBjaGVjaywgdmFsaWRhdGlvblJlc3VsdCB9ID0gcmVxdWlyZSgnZXhwcmVzcy12YWxpZGF0b3InKTtcbmxldCAgIHsgZ2V0dGluZ1VzZXJEZXRhaWxzIH0gPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlckxvZ2luTW9kZWxzJyk7XG5sZXQgICBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmxldCAgIGNvb2tpZVBhcnNlciA9IHJlcXVpcmUoJ2Nvb2tpZS1wYXJzZXInKTtcbmxldCAgIHsgdjQ6dXVpZHY0IH0gPSByZXF1aXJlKCd1dWlkJyk7XG5cbmxldCAgIHZlcmlmeVRva2VuID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZXMvdG9rZW5WZXJpZmljYXRpb24nKTtcblxuXG5sZXQgICBjb29raWVNYXhBZ2UgPSAzMDAwMDAwMDA7XG5sZXQgICBqd3RTZWNyZXQgPSBcImtleWJvYXJkIGNhdFwiOyBcblxucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSlcblxuXG5sZXQgICBjcmVhdGVUb2tlbiA9IChlbWFpbCkgPT4ge1xuICBsZXQgICB0b2tlbiA9IGp3dC5zaWduKHsgZW1haWwgfSwgand0U2VjcmV0LCB7IGV4cGlyZXNJbjogJzFoJyB9KTsgLy8gVG9rZW4gZXhwaXJlcyBpbiAxIGhvdXJcbiAgcmV0dXJuIHRva2VuO1xufTtcblxuXG5cbi8qIEdFVCB1c2VycyBsaXN0aW5nLiAqL1xucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHJlcy5zZW5kKCdyZXNwb25kIHdpdGggYSByZXNvdXJjZScpO1xufSk7XG5cbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyKHJlcSwgcmVzLCBuZXh0KXtcbiAgXG4gICAgdHJ5e1xuICAgICAgcmVzLnJlbmRlcigncmVnaXN0ZXInKTtcbiAgICB9XG4gICAgY2F0Y2goZSl7XG4gICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9naW4ocmVxLCByZXMsIG5leHQpe1xuICAgXG4gIHRyeXtcbiAgICByZXMucmVuZGVyKCdsb2dpbicpO1xuICB9XG4gIGNhdGNoKGUpe1xuICAgIGNvbnNvbGUubG9nKGUpXG4gIH1cbn1cblxuXG5cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlKHJlcSwgcmVzLCBuZXh0KXtcbnRyeXtcbiAgbGV0ICAgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xuICBpZighZXJyb3JzLmlzRW1wdHkoKSl7XG4gICAgbGV0ICAgYWxlcnRFcnJvciA9IGVycm9ycy5hcnJheSgpXG4gICAgcmVzLmpzb24oe1xuICAgICAgYWxlcnRFcnJvcjphbGVydEVycm9yXG4gICAgfSk7XG4gIH1cbiAgZWxzZXtcbiAgICBsZXQgICAgcmVzdWx0MSA9IGF3YWl0IGdldHRpbmdVc2VyRGV0YWlscyhyZXEuYm9keS5lbWFpbClcbiAgICBpZihyZXN1bHQxPT1udWxsKXtcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgcmVzdWx0OiAndXNlci1ub3QtZm91bmQnLCBtc2c6J1VzZXIgRG9lcyBub3QgRXhpc3RzLCBQbGVhc2UgUmVnaXN0ZXInXG4gICAgICB9KVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgbGV0ICAgcHcgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShyZXEuYm9keS5wYXNzd29yZCxyZXN1bHQxLnBhc3N3b3JkKTtcbiAgICAgIGlmKHB3KXtcblxuICAgICAgICBsZXQgICB0b2tlbj1jcmVhdGVUb2tlbihyZXEuYm9keS5lbWFpbCk7XG4gICAgICAgIHJlcy5jb29raWUoJ2p3dCcsdG9rZW4se21heEFnZTogY29va2llTWF4QWdlLCBodHRwT25seTp0cnVlfSk7XG5cbiAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgIHJlc3VsdDogJ3JlZGlyZWN0JywgdXJsOicvdXNlcnMvdXNlcl9ob21lJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgIHJlc3VsdDogJ3Bhc3N3b3JkLXdyb25nJywgbXNnOidFbnRlciBDb3JyZWN0IFBhc3N3b3JkJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuY2F0Y2goZSl7XG4gIGNvbnNvbGUubG9nKGUpXG59XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG5ld3VzZXIgKHJlcSwgcmVzLCBuZXh0KXtcbnRyeXtcbmNvbnNvbGUubG9nKHJlcS5ib2R5KTtcbmNvbnNvbGUubG9nKFwiZW50ZXJlZCBzaWdudXBcIik7XG4gIGxldCAgIHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwYXNzd29yZDEgfSA9IHJlcS5ib2R5O1xuICBsZXQgICBoYXNoZWRQYXNzd29yZCA9IGJjcnlwdC5oYXNoU3luYyhwYXNzd29yZCwgMTApO1xuXG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KTtcblxuICBcbiAgbGV0ICAgZXhpc3RpbmdFbWFpbCA9IGF3YWl0IFVzZXIuZmluZCh7ZW1haWwgOiBlbWFpbH0pO1xuICBpZihleGlzdGluZ0VtYWlsLmxlbmd0aCE9PTApe1xuICAgIHJlcy5qc29uKHtcbiAgICAgIHJlc3VsdDonZXhpc3RpbmcgdXNlcicsIG1zZzonVXNlciB3aXRoIHRoaXMgZW1haWwgaWQgYWxyZWFkeSBleGlzdHMuIFRyeSB0byBsb2dpbidcbiAgICB9KVxuICB9XG4gIFxuICBlbHNlIGlmKHBhc3N3b3JkMSAhPT0gcGFzc3dvcmQpe1xuICAgIHJlcy5qc29uKHtcbiAgICAgIHJlc3VsdDogJ3Bhc3N3b3JkcyBkb2Vzbm90IG1hdGNoJywgbXNnOidFbnRlciBDb3JyZWN0IFBhc3N3b3JkJ1xuICAgIH0pXG4gIH1cblxuICBlbHNlIHtcbiAgICAgIGxldCAgIHVzZXIgPSBuZXcgVXNlcih7IG5hbWUsIGVtYWlsLCBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQgfSk7XG4gICAgICBsZXQgICBzYXZlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAgICAgaWYgKCFzYXZlZFVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnVW5leHBlY3RlZCBFcnJvciBPY2N1cnJlZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgcmVzdWx0OiAncmVkaXJlY3QnLCB1cmw6Jy91c2Vycy9sb2dpbidcbiAgICAgIH0pXG4gICAgIC8vIHJlcy5yZW5kZXIoJ2xvZ2luJyk7XG4gIH0gXG59Y2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnVW5leHBlY3RlZCBFcnJvciBPY2N1cnJlZCcgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9nb3V0IChyZXEsIHJlcywgbmV4dCkge1xuICB0cnkge1xuICAgIHJlcy5jbGVhckNvb2tpZSgnand0Jyk7XG4gICAgcmVzLnJlZGlyZWN0KCcvJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKVxuICB9XG59XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgcmVnaXN0ZXIsIGxvZ2luLCB2YWxpZGF0ZSwgbmV3dXNlciwgbG9nb3V0fTtcbiJdLCJtYXBwaW5ncyI6InE1TkFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixHQUFJLENBQUFFLE9BQU8sRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFDaEMs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