function cov_1x8aq8babk(){var path="/home/abhigna.t/EventEasee/models/TicketCount.js";var hash="d817f1fe365208c84748ed9bea228df5e86bb631";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/abhigna.t/EventEasee/models/TicketCount.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:4,column:4},end:{line:13,column:5}},"2":{start:{line:5,column:22},end:{line:5,column:51}},"3":{start:{line:6,column:8},end:{line:8,column:9}},"4":{start:{line:7,column:12},end:{line:7,column:21}},"5":{start:{line:9,column:8},end:{line:9,column:35}},"6":{start:{line:11,column:8},end:{line:11,column:66}},"7":{start:{line:12,column:8},end:{line:12,column:20}},"8":{start:{line:18,column:4},end:{line:33,column:5}},"9":{start:{line:19,column:22},end:{line:19,column:51}},"10":{start:{line:20,column:8},end:{line:22,column:9}},"11":{start:{line:21,column:12},end:{line:21,column:25}},"12":{start:{line:23,column:33},end:{line:23,column:62}},"13":{start:{line:24,column:8},end:{line:26,column:9}},"14":{start:{line:25,column:12},end:{line:25,column:25}},"15":{start:{line:27,column:8},end:{line:27,column:47}},"16":{start:{line:28,column:8},end:{line:28,column:27}},"17":{start:{line:29,column:8},end:{line:29,column:20}},"18":{start:{line:31,column:8},end:{line:31,column:61}},"19":{start:{line:32,column:8},end:{line:32,column:20}},"20":{start:{line:37,column:0},end:{line:37,column:81}}},fnMap:{"0":{name:"getAvailableTicketsFromDatabase",decl:{start:{line:3,column:15},end:{line:3,column:46}},loc:{start:{line:3,column:57},end:{line:15,column:1}},line:3},"1":{name:"updateTicketCountInDatabase",decl:{start:{line:17,column:15},end:{line:17,column:42}},loc:{start:{line:17,column:60},end:{line:35,column:1}},line:17}},branchMap:{"0":{loc:{start:{line:6,column:8},end:{line:8,column:9}},type:"if",locations:[{start:{line:6,column:8},end:{line:8,column:9}},{start:{line:6,column:8},end:{line:8,column:9}}],line:6},"1":{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:20,column:8},end:{line:22,column:9}}],line:20},"2":{loc:{start:{line:24,column:8},end:{line:26,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:26,column:9}},{start:{line:24,column:8},end:{line:26,column:9}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d817f1fe365208c84748ed9bea228df5e86bb631"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1x8aq8babk=function(){return actualCoverage;};}return actualCoverage;}cov_1x8aq8babk();const Event=(cov_1x8aq8babk().s[0]++,require('./Event'));async function getAvailableTicketsFromDatabase(eventId){cov_1x8aq8babk().f[0]++;cov_1x8aq8babk().s[1]++;try{const event=(cov_1x8aq8babk().s[2]++,await Event.findById(eventId));cov_1x8aq8babk().s[3]++;if(!event){cov_1x8aq8babk().b[0][0]++;cov_1x8aq8babk().s[4]++;return 0;// Event not found
}else{cov_1x8aq8babk().b[0][1]++;}cov_1x8aq8babk().s[5]++;return event.no_of_tickets;}catch(error){cov_1x8aq8babk().s[6]++;console.error('Error fetching available tickets:',error);cov_1x8aq8babk().s[7]++;throw error;}}async function updateTicketCountInDatabase(eventId,tickets){cov_1x8aq8babk().f[1]++;cov_1x8aq8babk().s[8]++;try{const event=(cov_1x8aq8babk().s[9]++,await Event.findById(eventId));cov_1x8aq8babk().s[10]++;if(!event){cov_1x8aq8babk().b[1][0]++;cov_1x8aq8babk().s[11]++;return false;// Event not found
}else{cov_1x8aq8babk().b[1][1]++;}const remainingTickets=(cov_1x8aq8babk().s[12]++,event.no_of_tickets-tickets);cov_1x8aq8babk().s[13]++;if(remainingTickets<0){cov_1x8aq8babk().b[2][0]++;cov_1x8aq8babk().s[14]++;return false;// Insufficient tickets
}else{cov_1x8aq8babk().b[2][1]++;}cov_1x8aq8babk().s[15]++;event.no_of_tickets=remainingTickets;cov_1x8aq8babk().s[16]++;await event.save();cov_1x8aq8babk().s[17]++;return true;// Ticket count updated successfully
}catch(error){cov_1x8aq8babk().s[18]++;console.error('Error updating ticket count:',error);cov_1x8aq8babk().s[19]++;throw error;}}cov_1x8aq8babk().s[20]++;module.exports={getAvailableTicketsFromDatabase,updateTicketCountInDatabase};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXg4YXE4YmFiayIsImFjdHVhbENvdmVyYWdlIiwiRXZlbnQiLCJzIiwicmVxdWlyZSIsImdldEF2YWlsYWJsZVRpY2tldHNGcm9tRGF0YWJhc2UiLCJldmVudElkIiwiZiIsImV2ZW50IiwiZmluZEJ5SWQiLCJiIiwibm9fb2ZfdGlja2V0cyIsImVycm9yIiwiY29uc29sZSIsInVwZGF0ZVRpY2tldENvdW50SW5EYXRhYmFzZSIsInRpY2tldHMiLCJyZW1haW5pbmdUaWNrZXRzIiwic2F2ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJUaWNrZXRDb3VudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFdmVudCA9IHJlcXVpcmUoJy4vRXZlbnQnKTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlVGlja2V0c0Zyb21EYXRhYmFzZSAoZXZlbnRJZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgRXZlbnQuZmluZEJ5SWQoZXZlbnRJZCk7XG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAwOyAvLyBFdmVudCBub3QgZm91bmRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnQubm9fb2ZfdGlja2V0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhdmFpbGFibGUgdGlja2V0czonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVUaWNrZXRDb3VudEluRGF0YWJhc2UoZXZlbnRJZCwgdGlja2V0cyl7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBhd2FpdCBFdmVudC5maW5kQnlJZChldmVudElkKTtcbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFdmVudCBub3QgZm91bmRcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1haW5pbmdUaWNrZXRzID0gZXZlbnQubm9fb2ZfdGlja2V0cyAtIHRpY2tldHM7XG4gICAgICAgIGlmIChyZW1haW5pbmdUaWNrZXRzIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBJbnN1ZmZpY2llbnQgdGlja2V0c1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50Lm5vX29mX3RpY2tldHMgPSByZW1haW5pbmdUaWNrZXRzO1xuICAgICAgICBhd2FpdCBldmVudC5zYXZlKCk7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBUaWNrZXQgY291bnQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB0aWNrZXQgY291bnQ6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IGdldEF2YWlsYWJsZVRpY2tldHNGcm9tRGF0YWJhc2UsIHVwZGF0ZVRpY2tldENvdW50SW5EYXRhYmFzZX07Il0sIm1hcHBpbmdzIjoidXZGQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBQUUsS0FBSyxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUVoQyxjQUFlLENBQUFDLCtCQUErQkEsQ0FBRUMsT0FBTyxDQUFFLENBQUFOLGNBQUEsR0FBQU8sQ0FBQSxNQUFBUCxjQUFBLEdBQUFHLENBQUEsTUFDckQsR0FBSSxDQUNBLEtBQU0sQ0FBQUssS0FBSyxFQUFBUixjQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLENBQUFELEtBQUssQ0FBQ08sUUFBUSxDQUFDSCxPQUFPLENBQUMsRUFBQ04sY0FBQSxHQUFBRyxDQUFBLE1BQzVDLEdBQUksQ0FBQ0ssS0FBSyxDQUFFLENBQUFSLGNBQUEsR0FBQVUsQ0FBQSxTQUFBVixjQUFBLEdBQUFHLENBQUEsTUFDUixNQUFPLEVBQUMsQ0FBRTtBQUNkLENBQUMsS0FBQUgsY0FBQSxHQUFBVSxDQUFBLFVBQUFWLGNBQUEsR0FBQUcsQ0FBQSxNQUNELE1BQU8sQ0FBQUssS0FBSyxDQUFDRyxhQUFhLENBQzlCLENBQUUsTUFBT0MsS0FBSyxDQUFFLENBQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUNaVSxPQUFPLENBQUNELEtBQUssQ0FBQyxtQ0FBbUMsQ0FBRUEsS0FBSyxDQUFDLENBQUNaLGNBQUEsR0FBQUcsQ0FBQSxNQUMxRCxLQUFNLENBQUFTLEtBQUssQ0FDZixDQUVKLENBRUEsY0FBZSxDQUFBRSwyQkFBMkJBLENBQUNSLE9BQU8sQ0FBRVMsT0FBTyxDQUFDLENBQUFmLGNBQUEsR0FBQU8sQ0FBQSxNQUFBUCxjQUFBLEdBQUFHLENBQUEsTUFDeEQsR0FBSSxDQUNBLEtBQU0sQ0FBQUssS0FBSyxFQUFBUixjQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLENBQUFELEtBQUssQ0FBQ08sUUFBUSxDQUFDSCxPQUFPLENBQUMsRUFBQ04sY0FBQSxHQUFBRyxDQUFBLE9BQzVDLEdBQUksQ0FBQ0ssS0FBSyxDQUFFLENBQUFSLGNBQUEsR0FBQVUsQ0FBQSxTQUFBVixjQUFBLEdBQUFHLENBQUEsT0FDUixNQUFPLE1BQUssQ0FBRTtBQUNsQixDQUFDLEtBQUFILGNBQUEsR0FBQVUsQ0FBQSxVQUNELEtBQU0sQ0FBQU0sZ0JBQWdCLEVBQUFoQixjQUFBLEdBQUFHLENBQUEsT0FBR0ssS0FBSyxDQUFDRyxhQUFhLENBQUdJLE9BQU8sRUFBQ2YsY0FBQSxHQUFBRyxDQUFBLE9BQ3ZELEdBQUlhLGdCQUFnQixDQUFHLENBQUMsQ0FBRSxDQUFBaEIsY0FBQSxHQUFBVSxDQUFBLFNBQUFWLGNBQUEsR0FBQUcsQ0FBQSxPQUN0QixNQUFPLE1BQUssQ0FBRTtBQUNsQixDQUFDLEtBQUFILGNBQUEsR0FBQVUsQ0FBQSxVQUFBVixjQUFBLEdBQUFHLENBQUEsT0FDREssS0FBSyxDQUFDRyxhQUFhLENBQUdLLGdCQUFnQixDQUFDaEIsY0FBQSxHQUFBRyxDQUFBLE9BQ3ZDLEtBQU0sQ0FBQUssS0FBSyxDQUFDUyxJQUFJLENBQUMsQ0FBQyxDQUFDakIsY0FBQSxHQUFBRyxDQUFBLE9BQ25CLE1BQU8sS0FBSSxDQUFFO0FBQ2pCLENBQUUsTUFBT1MsS0FBSyxDQUFFLENBQUFaLGNBQUEsR0FBQUcsQ0FBQSxPQUNaVSxPQUFPLENBQUNELEtBQUssQ0FBQyw4QkFBOEIsQ0FBRUEsS0FBSyxDQUFDLENBQUNaLGNBQUEsR0FBQUcsQ0FBQSxPQUNyRCxLQUFNLENBQUFTLEtBQUssQ0FDZixDQUVKLENBQUNaLGNBQUEsR0FBQUcsQ0FBQSxPQUVEZSxNQUFNLENBQUNDLE9BQU8sQ0FBRyxDQUFFZCwrQkFBK0IsQ0FBRVMsMkJBQTJCLENBQUMifQ==