function cov_2ghan3dk7n(){var path="/home/abhigna.t/EventEasee/services/uploadToS3.js";var hash="48eb881a14d1c3f9fed312c689d03aa6e26aa452";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/abhigna.t/EventEasee/services/uploadToS3.js",statementMap:{"0":{start:{line:2,column:39},end:{line:2,column:68}},"1":{start:{line:3,column:29},end:{line:3,column:42}},"2":{start:{line:4,column:11},end:{line:4,column:24}},"3":{start:{line:6,column:17},end:{line:12,column:2}},"4":{start:{line:16,column:21},end:{line:16,column:48}},"5":{start:{line:17,column:19},end:{line:17,column:40}},"6":{start:{line:18,column:23},end:{line:22,column:3}},"7":{start:{line:24,column:2},end:{line:32,column:3}},"8":{start:{line:25,column:17},end:{line:25,column:72}},"9":{start:{line:26,column:4},end:{line:26,column:53}},"10":{start:{line:28,column:4},end:{line:28,column:64}},"11":{start:{line:30,column:4},end:{line:30,column:48}},"12":{start:{line:31,column:4},end:{line:31,column:14}},"13":{start:{line:37,column:0},end:{line:39,column:2}}},fnMap:{"0":{name:"uploadFileToS3",decl:{start:{line:15,column:15},end:{line:15,column:29}},loc:{start:{line:15,column:48},end:{line:33,column:1}},line:15}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"48eb881a14d1c3f9fed312c689d03aa6e26aa452"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2ghan3dk7n=function(){return actualCoverage;};}return actualCoverage;}cov_2ghan3dk7n();const{S3Client,PutObjectCommand}=(cov_2ghan3dk7n().s[0]++,require("@aws-sdk/client-s3"));const{createReadStream}=(cov_2ghan3dk7n().s[1]++,require("fs"));const fs=(cov_2ghan3dk7n().s[2]++,require("fs"));const s3Client=(cov_2ghan3dk7n().s[3]++,new S3Client({region:process.env.REGION,credentials:{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY}}));// Function to upload file to S3
async function uploadFileToS3(bucketName,file){cov_2ghan3dk7n().f[0]++;const fileStream=(cov_2ghan3dk7n().s[4]++,createReadStream(file.path));const fileName=(cov_2ghan3dk7n().s[5]++,`${Date.now()}-Cover`);const uploadParams=(cov_2ghan3dk7n().s[6]++,{Bucket:bucketName,Key:fileName,Body:fileStream});cov_2ghan3dk7n().s[7]++;try{const data=(cov_2ghan3dk7n().s[8]++,await s3Client.send(new PutObjectCommand(uploadParams)));cov_2ghan3dk7n().s[9]++;console.log("File uploaded successfully:",data);cov_2ghan3dk7n().s[10]++;return`https://${bucketName}.s3.amazonaws.com/${fileName}`;}catch(err){cov_2ghan3dk7n().s[11]++;console.error("Error uploading file:",err);cov_2ghan3dk7n().s[12]++;throw err;// Re-throw the error to handle it in the calling function
}}cov_2ghan3dk7n().s[13]++;module.exports={uploadFileToS3};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmdoYW4zZGs3biIsImFjdHVhbENvdmVyYWdlIiwiUzNDbGllbnQiLCJQdXRPYmplY3RDb21tYW5kIiwicyIsInJlcXVpcmUiLCJjcmVhdGVSZWFkU3RyZWFtIiwiZnMiLCJzM0NsaWVudCIsInJlZ2lvbiIsInByb2Nlc3MiLCJlbnYiLCJSRUdJT04iLCJjcmVkZW50aWFscyIsImFjY2Vzc0tleUlkIiwiQVdTX0FDQ0VTU19LRVlfSUQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiLCJ1cGxvYWRGaWxlVG9TMyIsImJ1Y2tldE5hbWUiLCJmaWxlIiwiZiIsImZpbGVTdHJlYW0iLCJwYXRoIiwiZmlsZU5hbWUiLCJEYXRlIiwibm93IiwidXBsb2FkUGFyYW1zIiwiQnVja2V0IiwiS2V5IiwiQm9keSIsImRhdGEiLCJzZW5kIiwiY29uc29sZSIsImxvZyIsImVyciIsImVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVwbG9hZFRvUzMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCB7IFMzQ2xpZW50LCBQdXRPYmplY3RDb21tYW5kIH0gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LXMzXCIpO1xuY29uc3QgeyBjcmVhdGVSZWFkU3RyZWFtIH0gPSByZXF1aXJlKFwiZnNcIik7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbiBcbmNvbnN0IHMzQ2xpZW50ID0gbmV3IFMzQ2xpZW50KHtcbiAgcmVnaW9uOiBwcm9jZXNzLmVudi5SRUdJT04sXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lELFxuICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZLFxuICB9LFxufSk7XG4gXG4vLyBGdW5jdGlvbiB0byB1cGxvYWQgZmlsZSB0byBTM1xuYXN5bmMgZnVuY3Rpb24gdXBsb2FkRmlsZVRvUzMoYnVja2V0TmFtZSwgZmlsZSkge1xuICBjb25zdCBmaWxlU3RyZWFtID0gY3JlYXRlUmVhZFN0cmVhbShmaWxlLnBhdGgpO1xuICBjb25zdCBmaWxlTmFtZSA9IGAke0RhdGUubm93KCl9LUNvdmVyYDtcbiAgY29uc3QgdXBsb2FkUGFyYW1zID0ge1xuICAgIEJ1Y2tldDogYnVja2V0TmFtZSxcbiAgICBLZXk6IGZpbGVOYW1lLFxuICAgIEJvZHk6IGZpbGVTdHJlYW0sXG4gIH07XG4gXG4gIHRyeSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHMzQ2xpZW50LnNlbmQobmV3IFB1dE9iamVjdENvbW1hbmQodXBsb2FkUGFyYW1zKSk7XG4gICAgY29uc29sZS5sb2coXCJGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseTpcIiwgZGF0YSk7XG4gXG4gICAgcmV0dXJuIGBodHRwczovLyR7YnVja2V0TmFtZX0uczMuYW1hem9uYXdzLmNvbS8ke2ZpbGVOYW1lfWA7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGxvYWRpbmcgZmlsZTpcIiwgZXJyKTtcbiAgICB0aHJvdyBlcnI7IC8vIFJlLXRocm93IHRoZSBlcnJvciB0byBoYW5kbGUgaXQgaW4gdGhlIGNhbGxpbmcgZnVuY3Rpb25cbiAgfVxufVxuIFxuIFxuIFxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHVwbG9hZEZpbGVUb1MzLFxufTtcbiAiXSwibWFwcGluZ3MiOiJta0RBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZFosS0FBTSxDQUFFRSxRQUFRLENBQUVDLGdCQUFpQixDQUFDLEVBQUFILGNBQUEsR0FBQUksQ0FBQSxNQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsRUFDcEUsS0FBTSxDQUFFQyxnQkFBaUIsQ0FBQyxFQUFBTixjQUFBLEdBQUFJLENBQUEsTUFBR0MsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUMxQyxLQUFNLENBQUFFLEVBQUUsRUFBQVAsY0FBQSxHQUFBSSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFFeEIsS0FBTSxDQUFBRyxRQUFRLEVBQUFSLGNBQUEsR0FBQUksQ0FBQSxNQUFHLEdBQUksQ0FBQUYsUUFBUSxDQUFDLENBQzVCTyxNQUFNLENBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxNQUFNLENBQzFCQyxXQUFXLENBQUUsQ0FDWEMsV0FBVyxDQUFFSixPQUFPLENBQUNDLEdBQUcsQ0FBQ0ksaUJBQWlCLENBQzFDQyxlQUFlLENBQUVOLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTSxxQkFDL0IsQ0FDRixDQUFDLENBQUMsRUFFRjtBQUNBLGNBQWUsQ0FBQUMsY0FBY0EsQ0FBQ0MsVUFBVSxDQUFFQyxJQUFJLENBQUUsQ0FBQXBCLGNBQUEsR0FBQXFCLENBQUEsTUFDOUMsS0FBTSxDQUFBQyxVQUFVLEVBQUF0QixjQUFBLEdBQUFJLENBQUEsTUFBR0UsZ0JBQWdCLENBQUNjLElBQUksQ0FBQ0csSUFBSSxDQUFDLEVBQzlDLEtBQU0sQ0FBQUMsUUFBUSxFQUFBeEIsY0FBQSxHQUFBSSxDQUFBLE1BQUksR0FBRXFCLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUUsUUFBTyxFQUN0QyxLQUFNLENBQUFDLFlBQVksRUFBQTNCLGNBQUEsR0FBQUksQ0FBQSxNQUFHLENBQ25Cd0IsTUFBTSxDQUFFVCxVQUFVLENBQ2xCVSxHQUFHLENBQUVMLFFBQVEsQ0FDYk0sSUFBSSxDQUFFUixVQUNSLENBQUMsRUFBQ3RCLGNBQUEsR0FBQUksQ0FBQSxNQUVGLEdBQUksQ0FDRixLQUFNLENBQUEyQixJQUFJLEVBQUEvQixjQUFBLEdBQUFJLENBQUEsTUFBRyxLQUFNLENBQUFJLFFBQVEsQ0FBQ3dCLElBQUksQ0FBQyxHQUFJLENBQUE3QixnQkFBZ0IsQ0FBQ3dCLFlBQVksQ0FBQyxDQUFDLEVBQUMzQixjQUFBLEdBQUFJLENBQUEsTUFDckU2QixPQUFPLENBQUNDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBRUgsSUFBSSxDQUFDLENBQUMvQixjQUFBLEdBQUFJLENBQUEsT0FFakQsTUFBUSxXQUFVZSxVQUFXLHFCQUFvQkssUUFBUyxFQUFDLENBQzdELENBQUUsTUFBT1csR0FBRyxDQUFFLENBQUFuQyxjQUFBLEdBQUFJLENBQUEsT0FDWjZCLE9BQU8sQ0FBQ0csS0FBSyxDQUFDLHVCQUF1QixDQUFFRCxHQUFHLENBQUMsQ0FBQ25DLGNBQUEsR0FBQUksQ0FBQSxPQUM1QyxLQUFNLENBQUErQixHQUFHLENBQUU7QUFDYixDQUNGLENBQUNuQyxjQUFBLEdBQUFJLENBQUEsT0FJRGlDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLENBQ2ZwQixjQUNGLENBQUMifQ==